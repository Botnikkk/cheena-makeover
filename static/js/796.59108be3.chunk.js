"use strict";(self.webpackChunkcheena_makevover=self.webpackChunkcheena_makevover||[]).push([[796],{8796:(e,t,r)=>{r.r(t),r.d(t,{encodeIntoResult:()=>d,stegaEncodeSourceMap:()=>A,stegaEncodeSourceMap$1:()=>O});var n=r(6490);const o=/_key\s*==\s*['"](.*)['"]/;function s(e){if(!Array.isArray(e))throw new Error("Path is not an array");return e.reduce((e,t,r)=>{const n=typeof t;if("number"===n)return`${e}[${t}]`;if("string"===n)return`${e}${0===r?"":"."}${t}`;if(function(e){return"string"==typeof e?o.test(e.trim()):"object"==typeof e&&"_key"in e}(t)&&t._key)return`${e}[_key=="${t._key}"]`;if(Array.isArray(t)){const[r,n]=t;return`${e}[${r}:${n}]`}throw new Error(`Unsupported path segment \`${JSON.stringify(t)}\``)},"")}const i={"\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","'":"\\'","\\":"\\\\"},a={"\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t","\\'":"'","\\\\":"\\"};function c(e){const t=[],r=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;let n;for(;null!==(n=r.exec(e));){if(void 0!==n[1]){const e=n[1].replace(/\\(\\|f|n|r|t|')/g,e=>a[e]);t.push(e);continue}if(void 0===n[2]){if(void 0!==n[3]){const e=n[3].replace(/\\(\\')/g,e=>a[e]);t.push({_key:e,_index:-1});continue}}else t.push(parseInt(n[2],10))}return t}function u(e){return e.map(e=>{if("string"==typeof e||"number"==typeof e)return e;if(""!==e._key)return{_key:e._key};if(-1!==e._index)return e._index;throw new Error(`invalid segment:${JSON.stringify(e)}`)})}function p(e){return e.map(e=>{if("string"==typeof e||"number"==typeof e)return e;if(-1!==e._index)return e._index;throw new Error(`invalid segment:${JSON.stringify(e)}`)})}function l(e,t){if(!t?.mappings)return;const r=`$${p(e).map(e=>"string"==typeof e?`['${e.replace(/[\f\n\r\t'\\]/g,e=>i[e])}']`:"number"==typeof e?`[${e}]`:""!==e._key?`[?(@._key=='${e._key.replace(/['\\]/g,e=>i[e])}')]`:`[${e._index}]`).join("")}`;if(void 0!==t.mappings[r])return{mapping:t.mappings[r],matchedPath:r,pathSuffix:""};const n=function(e){return e.map(e=>"string"==typeof e?`['${e.replace(/[\f\n\r\t'\\]/g,e=>i[e])}']`:"number"==typeof e?`[${e}]`:""!==e._key?`[?(@._key=='${e._key.replace(/['\\]/g,e=>i[e])}')]`:`[${e._index}]`)}(p(e));for(let o=n.length-1;o>=0;o--){const e=`$${n.slice(0,o).join("")}`,s=t.mappings[e];if(s){return{mapping:s,matchedPath:e,pathSuffix:r.substring(e.length)}}}}function f(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(function(e){return null!==e&&Array.isArray(e)}(e))return e.map((e,o)=>{if((0,n.u4)(e)){const n=e._key;if("string"==typeof n)return f(e,t,r.concat({_key:n,_index:o}))}return f(e,t,r.concat(o))});if((0,n.u4)(e)){if("block"===e._type||"span"===e._type){const n={...e};return"block"===e._type?n.children=f(e.children,t,r.concat("children")):"span"===e._type&&(n.text=f(e.text,t,r.concat("text"))),n}return Object.fromEntries(Object.entries(e).map(e=>{let[n,o]=e;return[n,f(o,t,r.concat(n))]}))}return t(e,r)}function d(e,t,r){return f(e,(e,n)=>{if("string"!=typeof e)return e;const o=l(n,t);if(!o)return e;const{mapping:s,matchedPath:i}=o;if("value"!==s.type||"documentValue"!==s.source.type)return e;const a=t.documents[s.source.document],u=t.paths[s.source.path],p=c(i),f=c(u).concat(n.slice(p.length));return r({sourcePath:f,sourceDocument:a,resultPath:n,value:e})})}const h=".",g=`drafts${h}`,y=`versions${h}`;function m(e){return e.startsWith(g)}function $(e){return e.startsWith(y)}function k(e){const{baseUrl:t,workspace:r="default",tool:n="default",id:o,type:i,path:a,projectId:c,dataset:p}=e;if(!t)throw new Error("baseUrl is required");if(!a)throw new Error("path is required");if(!o)throw new Error("id is required");if("/"!==t&&t.endsWith("/"))throw new Error("baseUrl must not end with a slash");const l="default"===r?void 0:r,f="default"===n?void 0:n,d=function(e){return $(e)?e.split(h).slice(2).join(h):m(e)?e.slice(g.length):e}(o),y=Array.isArray(a)?s(u(a)):a,k=new URLSearchParams({baseUrl:t,id:d,type:i,path:y});if(l&&k.set("workspace",l),f&&k.set("tool",f),c&&k.set("projectId",c),p&&k.set("dataset",p),function(e){return!m(e)&&!$(e)}(o))k.set("perspective","published");else if($(o)){const e=function(e){if(!$(e))return;const[t,r,...n]=e.split(h);return r}(o);k.set("perspective",e)}const _=["/"===t?"":t];l&&_.push(l);const w=["mode=presentation",`id=${d}`,`type=${i}`,`path=${encodeURIComponent(y)}`];return f&&w.push(`tool=${f}`),_.push("intent","edit",`${w.join(";")}?${k}`),_.join("/")}const _=e=>{let{sourcePath:t,resultPath:r,value:n}=e;if(/^\d{4}-\d{2}-\d{2}/.test(o=n)&&Date.parse(o)||function(e){try{const{protocol:t}=new URL(e,e.startsWith("/")?"https://acme.com":void 0);return b.has(t)||t.startsWith("web+")}catch{return!1}}(n))return!1;var o;const s=t.at(-1);return!("slug"===t.at(-2)&&"current"===s||"string"==typeof s&&(s.startsWith("_")||s.endsWith("Id"))||t.some(e=>"meta"===e||"metadata"===e||"openGraph"===e||"seo"===e)||v(t)||v(r)||"string"==typeof s&&w.has(s))},w=new Set(["color","colour","currency","email","format","gid","hex","href","hsl","hsla","icon","id","index","key","language","layout","link","linkAction","locale","lqip","page","path","ref","rgb","rgba","route","secret","slug","status","tag","template","theme","type","textTheme","unit","url","username","variant","website"]);const b=new Set(["app:","data:","discord:","file:","ftp:","ftps:","geo:","http:","https:","imap:","javascript:","magnet:","mailto:","maps:","ms-excel:","ms-powerpoint:","ms-word:","slack:","sms:","spotify:","steam:","teams:","tel:","vscode:","zoom:"]);function v(e){return e.some(e=>"string"==typeof e&&null!==e.match(/type/i))}const S=[8203,8204,8205,65279],x=S.map(e=>String.fromCharCode(e)),E=[8203,8204,8205,8290,8291,8288,65279,8289,119155,119156,119157,119158,119159,119160,119161,119162];Object.fromEntries(S.map((e,t)=>[e,t])),Object.fromEntries(E.map((e,t)=>[e,t.toString(16)]));const U=String.fromCodePoint(S[0]).repeat(4);function j(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";return!0!==r&&("auto"!==r||(n=e)&&"string"==typeof n&&Date.parse(n)||function(e){try{return new URL(e,e.startsWith("/")?"https://example.com":void 0),!0}catch{return!1}}(e))?e:`${e}${function(e){if(void 0===e)return"";const t="string"==typeof e?e:JSON.stringify(e),r=(new TextEncoder).encode(t);let n="";for(let o=0;o<r.length;o++){const e=r[o];n+=x[e>>6&3]+x[e>>4&3]+x[e>>2&3]+x[3&e]}return U+n}(t)}`;var n}[...S,...E].map(e=>`\\u{${e.toString(16)}}`).join("");const P=20;function A(e,t,r){const{filter:n,logger:s,enabled:i}=r;if(!i){const n="config.enabled must be true, don't call this function otherwise";throw s?.error?.(`[@sanity/client]: ${n}`,{result:e,resultSourceMap:t,config:r}),new TypeError(n)}if(!t)return s?.error?.("[@sanity/client]: Missing Content Source Map from response body",{result:e,resultSourceMap:t,config:r}),e;if(!r.studioUrl){const n="config.studioUrl must be defined";throw s?.error?.(`[@sanity/client]: ${n}`,{result:e,resultSourceMap:t,config:r}),new TypeError(n)}const a={encoded:[],skipped:[]},c=d(e,t,e=>{let{sourcePath:t,sourceDocument:o,resultPath:i,value:c}=e;if(!1===("function"==typeof n?n({sourcePath:t,resultPath:i,filterDefault:_,sourceDocument:o,value:c}):_({sourcePath:t,resultPath:i,value:c})))return s&&a.skipped.push({path:C(t),value:`${c.slice(0,P)}${c.length>P?"...":""}`,length:c.length}),c;s&&a.encoded.push({path:C(t),value:`${c.slice(0,P)}${c.length>P?"...":""}`,length:c.length});const{baseUrl:u,workspace:p,tool:l}=function(e){let t="string"==typeof e?e:e.baseUrl;return"/"!==t&&(t=t.replace(/\/$/,"")),"string"==typeof e?{baseUrl:t}:{...e,baseUrl:t}}("function"==typeof r.studioUrl?r.studioUrl(o):r.studioUrl);if(!u)return c;const{_id:f,_type:d,_projectId:h,_dataset:g}=o;return j(c,{origin:"sanity.io",href:k({baseUrl:u,workspace:p,tool:l,id:f,type:d,path:t,...!r.omitCrossDatasetReferenceData&&{dataset:g,projectId:h}})},!0)});if(s){const e=a.skipped.length,t=a.encoded.length;if((e||t)&&((s?.groupCollapsed||s.log)?.("[@sanity/client]: Encoding source map into result"),s.log?.(`[@sanity/client]: Paths encoded: ${a.encoded.length}, skipped: ${a.skipped.length}`)),a.encoded.length>0&&(s?.log?.("[@sanity/client]: Table of encoded paths"),(s?.table||s.log)?.(a.encoded)),a.skipped.length>0){const e=new Set;for(const{path:t}of a.skipped)e.add(t.replace(o,"0").replace(/\[\d+\]/g,"[]"));s?.log?.("[@sanity/client]: List of skipped paths",[...e.values()])}(e||t)&&s?.groupEnd?.()}return c}function C(e){return s(u(e))}var O=Object.freeze({__proto__:null,stegaEncodeSourceMap:A})}}]);
//# sourceMappingURL=796.59108be3.chunk.js.map